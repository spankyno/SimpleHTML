<!DOCTYPE  html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Georef photos by Aitor</title>
  <meta name="description" content="Built with jdoodle.ai - A web application that displays geotagged images on a map and allows exporting locations as KML." />
  <meta property="og:title" content="Georef photos by Aitor - Map your geotagged photos" />
  <meta property="og:description" content="Built with jdoodle.ai - View your geotagged photos on interactive maps with support for multiple base layers and KML export." />
  <meta property="og:image" content="https://images.unsplash.com/photo-1524661135-423995f22d0b?ixid=M3w3MjUzNDh8MHwxfHNlYXJjaHwzfHxnZW90YWdnZWQlMjBwaG90b3MlMjBtYXAlMjBjYW1lcmF8ZW58MHx8fHwxNzQyODkzMTM2fDA&ixlib=rb-4.0.3&fit=fillmax&h=600&w=800" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z'/%3E%3Ccircle cx='12' cy='13' r='3'/%3E%3C/svg%3E" type="image/svg+xml">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  
  <!-- Exifr for EXIF extraction -->
  <script src="https://cdn.jsdelivr.net/npm/exifr/dist/full.umd.js"></script>
  
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="container">
        <div class="logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
            <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
            <circle cx="12" cy="13" r="3"/>
          </svg>
          <h1>Georef photos by Aitor</h1>
        </div>
        
        <div class="actions">
          <button id="toggle-sidebar-btn" class="btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
            <span class="hide-mobile">Photo List</span>
          </button>

          <button id="logout-btn" class="btn hidden" style="background-color: #ff4444; color: white;">
              Salir
          </button>
          
          <div class="dropdown">
            <button id="map-type-btn" class="btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="3" y1="9" x2="21" y2="9"></line>
                <line x1="3" y1="15" x2="21" y2="15"></line>
                <line x1="9" y1="3" x2="9" y2="21"></line>
                <line x1="15" y1="3" x2="15" y2="21"></line>
              </svg>
              <span class="hide-mobile">Map: <span id="current-map-type">OpenStreetMap</span></span>
              <span class="show-mobile">Map</span>
            </button>
            <div id="map-dropdown" class="dropdown-content">
              <a href="#" data-map="OpenStreetMap">OpenStreetMap</a>
              <a href="#" data-map="Google Maps">Google Maps</a>
              <a href="#" data-map="Bing Maps">Bing Maps</a>
              <a href="#" data-map="ESRI World Imagery">ESRI World Imagery</a>
            </div>
          </div>
          
          <button id="upload-btn" class="btn btn-green">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <span class="hide-mobile">Add Photos</span>
            <span class="show-mobile">Add</span>
          </button>
          
          <button id="export-kml-btn" class="btn btn-amber" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span class="hide-mobile">Export KML</span>
            <span class="show-mobile">KML</span>
          </button>
        </div>
      </div>
    </header>
    
    <main class="app-main">
      <aside id="photo-sidebar" class="photo-sidebar">
        <div class="sidebar-header">
          <h2>Photo List (<span id="photo-count">0</span>)</h2>
          <div class="search-box">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="search-input" placeholder="Search photos...">
            <button id="clear-search" class="clear-search hidden">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>
        <ul id="photo-list" class="photo-list"></ul>
      </aside>
      
      <div id="map-container" class="map-container">
        <div class="map-controls">
          <div class="control-item">
            <input type="checkbox" id="show-labels" checked>
            <label for="show-labels">Show photo labels</label>
          </div>
        </div>
        <div id="map" class="map"></div>
        <div id="photo-info" class="photo-info hidden"></div>
      </div>
    </main>
    
    <div id="upload-overlay" class="upload-overlay hidden">
      <div class="upload-modal">
        <div class="modal-header">
          <h2>Upload Geotagged Photos</h2>
          <button id="close-upload" class="close-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <div id="upload-area" class="upload-area">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="upload-icon">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <p>Drag and drop your photos here, or</p>
          <label class="file-input-label">
            Browse Files
            <input type="file" id="file-input" multiple accept="image/*">
          </label>
          <p class="upload-hint">Only geotagged images (JPG, PNG, etc.) will be displayed on the map.<br>Photos without GPS information will be discarded.</p>
        </div>
        
        <div id="upload-error" class="upload-message error hidden"></div>
        <div id="upload-discarded" class="upload-message warning hidden"></div>
        <div id="upload-processing" class="upload-processing hidden">
          <div class="spinner"></div>
          <p>Processing images...</p>
        </div>
        
        <div class="modal-footer">
          <p>We'll extract GPS data from your photos to display them on the map. Your photos are processed locally and not uploaded to any server.</p>
        </div>
      </div>
    </div>
  </div>
 
<div id="auth-overlay" class="upload-overlay"> <div class="upload-modal">
    <div class="modal-header">
      <h2 id="auth-title">Iniciar Sesión</h2>
    </div>
    <form id="auth-form" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
      <input type="email" id="auth-email" placeholder="Tu Email" required style="padding: 10px; border-radius: 4px; border: 1px solid #ccc;">
      <input type="password" id="auth-password" placeholder="Tu Contraseña" required style="padding: 10px; border-radius: 4px; border: 1px solid #ccc;">
      <button type="submit" id="auth-submit-btn" class="btn btn-green" style="width: 100%;">Entrar</button>
      <p style="text-align: center; font-size: 0.9em;">
        ¿No tienes cuenta? <a href="#" id="toggle-auth">Regístrate aquí</a>
      </p>
    </form>
    <div id="auth-error" class="upload-message error hidden"></div>
  </div>
</div>

<script type="module" src="./main.js"></script>

</body>
</html>
 
